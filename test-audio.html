<!DOCTYPE html>
<html>
<head>
    <title>Audio Test</title>
</head>
<body>
    <h1>Audio Test</h1>
    <audio id="testAudio" controls preload="metadata">
        <source src="http://localhost:3000/api/demo-audio" type="audio/wav">
        Your browser does not support the audio element.
    </audio>
    
    <br><br>
    
    <button onclick="testAudio()">Test Audio</button>
    <div id="output"></div>
    
    <script>
        const audio = document.getElementById('testAudio');
        const output = document.getElementById('output');
        
        audio.addEventListener('loadstart', () => output.innerHTML += 'Loading started...<br>');
        audio.addEventListener('canplay', () => output.innerHTML += 'Can play!<br>');
        audio.addEventListener('error', (e) => {
            output.innerHTML += `Error: ${e.target.error ? e.target.error.code : 'Unknown'}<br>`;
        });
        
        function testAudio() {
            output.innerHTML = 'Testing...<br>';
            audio.src = 'http://localhost:3000/api/demo-audio';
            audio.load();
            audio.play().catch(err => {
                output.innerHTML += `Play error: ${err.message}<br>`;
            });
        }
    </script>
</body>
</html>
